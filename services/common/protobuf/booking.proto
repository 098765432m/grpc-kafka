syntax = "proto3";

option go_package = "gen-proto/booking_pb;booking_pb";

service BookingService {
    rpc CreateBookings(NewBookingParam) returns (Empty);
    rpc DeleteBookingsByIds (DeleteBookingRequest) returns (Empty);
    rpc GetNumberOfOccupiedRooms(GetNumberOfOccupiedRoomsRequest) returns (GetNumberOfOccupiedRoomsResponse);
    rpc GetUnavailableRoomsByRoomTypeId(GetUnavailableRoomsByRoomTypeIdRequest) returns (GetUnavailableRoomsByRoomTypeIdResponse);
}

message Empty {}

message BookingParam {
    string checkIn = 1;
    string checkOut = 2;
    int32  total = 3;
    string roomTypeId = 4;
    string userId = 5;
    string roomId = 6;
}

message NewBookingParam {
    repeated BookingParam newBookings = 1;
}

message DeleteBookingRequest {
    repeated string bookingIds = 1;
}

message GetNumberOfOccupiedRoomsRequest {
    repeated string roomTypeIds = 1;
    string checkIn = 2;
    string checkOut = 3;
}

message ResultNumberOfOccupiedRooms {
    string roomTypeId = 1;
    int32 numberOfOccupiedRooms = 2;
}

message GetNumberOfOccupiedRoomsResponse {
    repeated ResultNumberOfOccupiedRooms results = 1;
}

message GetUnavailableRoomsByRoomTypeIdRequest{
    string room_type_id = 1;
    string check_in = 2;
    string check_out = 3;
}

message GetUnavailableRoomsByRoomTypeIdResponse{
    repeated string room_ids = 1;
}